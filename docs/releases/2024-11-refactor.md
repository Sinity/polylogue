# November 2024 Refresh

- **Registrar everywhere:** Local Codex/Claude Code syncs now reuse the shared `ConversationRegistrar`, and all metadata/runs live in a single SQLite database under `$XDG_STATE_HOME/polylogue/`.
- **Status dumps:** `polylogue status --dump runs.json` emits recent run history (use `-` for stdout) so cron/systemd jobs can archive telemetry without querying SQLite manually.
- **Structured run logs:** Every command now emits a single-line JSON payload (`{"event":"polylogue_run", ...}`) on stderr (set `POLYLOGUE_RUN_LOG=0` to silence it), and `status --dump-only` makes it easy to write pure JSON snapshots without reprinting the human-readable tables. Automation snippets gained `--status-log/--status-limit` so generated systemd/cron hooks automatically call `polylogue status --dump-only …` after each sync.
- **Pipeline telemetry:** Every stage records name, status, and duration in `PipelineContext.history`, making it easy to assert on execution paths in tests and surface actionable errors when something fails.
- **Branch-aware exports everywhere:** `--branch-export full|overlay|canonical` works across render/import/sync/watch, so archivists can pick between the original on-disk tree, overlay-only deltas, or a single canonical transcript per slug. Provider docs have been updated to clarify the flag.
- **Render/Drive on the registrar:** `polylogue render` and `polylogue sync drive` now run through the same message-level registrar pipeline as the other importers. Every run populates SQLite with per-message records, honours `--branch-export`, and writes the canonical/overlay trees just like ChatGPT/Claude/Codex imports.
- **ChatGPT/Claude export sync:** `polylogue sync chatgpt|claude` now walks `$XDG_DATA_HOME/polylogue/exports/{chatgpt,claude}` (or a custom `--base-dir`) and runs the importer for every bundle, complete with registrar updates and branch-aware Markdown. Repeat exports no longer require bespoke `polylogue import …` invocations.
- **Export watchers:** `polylogue watch chatgpt|claude` keeps the export directories under `$XDG_DATA_HOME/polylogue/exports/…` in sync automatically—each new ZIP or refreshed `conversations.json` triggers an incremental import, matching the Codex/Claude Code watch experience.
- **Status filters & summaries:** `polylogue status --providers drive,codex` narrows the summary tables, `--summary path` writes aggregated JSON for dashboards (use `--summary-only --summary -` for headless streaming), and the existing `--dump` helpers continue to export raw runs.
- **Beta rollout:** See `docs/beta_rollout.md` for the announcement template and the checklist we follow before promoting this refactor to GA.
- **Stronger tests:** Added coverage for Drive token bootstrap, sync watcher debounce behaviour, and the registrar contract itself to keep the new architecture stable.
- **Interactive hints:** The main menu now reminds users how to navigate gum pickers—arrow keys, Enter, `q`—so the UX feels intentional from the first run.
